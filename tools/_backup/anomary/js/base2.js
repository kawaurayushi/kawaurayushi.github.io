var target="";
$( ".formtext"     ).change(function() {  PrintAlltext( Str2Morse( $( ".formtext"   ).val())) });
$( ".formmorse"    ).change(function() {  PrintAlltext(            $( ".formmorse"  ).val() ); });
//$( ".formtext"    ).change(function() {  PrintAlltext( GetHexbyText(    $( ".form7seg"    ).val())); });
//$( ".formtext"    ).change(function() {  PrintAlltext( GetHexbyText(    $( ".form7sega"    ).val())); });
//$( ".formtext"    ).change(function() {  PrintAlltext( GetHexbyText(    $( ".form14seg"    ).val())); });
//$( ".formtext"    ).change(function() {  PrintAlltext( GetHexbyText(    $( ".form14sega"    ).val())); });
//$( ".formtext"    ).change(function() {  PrintAlltext( GetHexbyText(    $( ".form16seg"    ).val())); });
//$( ".formtext"    ).change(function() {  PrintAlltext( GetHexbyText(    $( ".form16sega"    ).val())); });
function cleartextarea(){
	$( "textarea" ).each(function(index){ $( this ).val(""); }); 
}

/* for Debug */
function echotext(){
	$( "textarea" ).each(function(index){ console.log( index + ": " + $( this ).val() ); }); 
}

/* for Symbol / Numeric / Polybius */
function trimspace(str){
	return str.replace(/ /g,"");
}

function trimCRLF(str){
	return str.replace(/[\n\r]/g,"");
}

function Str2Morse(str) {
	var alphabet = {
		"a"	 : "01",		"b"	 : "1000",		"c"	 : "1010",		"d"	 : "100",
		"e"	 : "0",			"f"	 : "0010",		"g"	 : "110",		"h"	 : "0000",
		"i"	 : "00",		"j"	 : "0111",		"k"	 : "101",		"l"	 : "0100",
		"m"	 : "11",		"n"	 : "10",		"o"	 : "111",		"p"	 : "0110",
		"q"	 : "1101",		"r"	 : "010",		"s"	 : "000",		"t"	 : "1",
		"u"	 : "001",		"v"	 : "0001",		"w"	 : "011",		"x"	 : "1001",
		"y"	 : "1011",		"z"	 : "1100",		"0"	 : "11111",		"1"	 : "01111",
		"2"	 : "00111",		"3"	 : "00011",		"4"	 : "00001",		"5"	 : "00000",
		"6"	 : "10000",		"7"	 : "11000",		"8"	 : "11100",		"9"	 : "11110",
		"."	 : "010101",	","	 : "110011",	"?"	 : "001100",	"'"	 : "011110",
		"!"	 : "101011",	"-"	 : "100001",	"/"	 : "10010",		"@"	 : "011010",
		"("	 : "10110",		")"	 : "101101",	":"	 : "111000",	";"	 : "101010",
		"="	 : "10001",		"+"	 : "01010",		"&"	 : "01000",		"_"	 : "001101",
		'"'	 : "010010",	"$"	 : "0001001",
	};
	return str.split('').map(function(e){ return alphabet[e.toLowerCase()] || '';}).join(' '); 
}

function Morse2Str(str) {
	var alphabet = {
		"01"	: "a",	"1000"	: "b",	"1010"	: "c",
		"100"	: "d",	"0" 	: "e",	"0010"	: "f",
		"110"	: "g",	"0000"	: "h",	"00"	: "i",
		"0111"	: "j",	"101"	: "k",	"0100"	: "l",
		"11"	: "m",	"10"	: "n",	"111"	: "o",
		"0110"	: "p",	"1101"	: "q",	"010"	: "r",
		"000"	: "s",	"1" 	: "t",	"001"	: "u",
		"0001"	: "v",	"011"	: "w",	"1001"	: "x",
		"1011"	: "y",	"1100"	: "z",	"11111"	: "0",
		"01111"	: "1",	"00111"	: "2",	"00011"	: "3",
		"00001"	: "4",	"00000"	: "5",	"10000"	: "6",
		"11000"	: "7",	"11100"	: "8",	"11110"	: "9",
		'010101': '0',	'110011': ',',	'001100': '?',
		'100001': '1',	'10001'	: '=',	'111000': ':',
		'101010': ';',	'10110'	: '(',	'101101': ')',
		'10010'	: '/',	'010010': '"',	'0001001': '$',
		'011110': "'",	'010100': '¶',	'001101': '_',
		'011010': '@',	'1110'	: '!',	'101011': '!',
		'01010'	: '+',	'01000'	: '~',	'000101': '#',
		'0 000'	: '&',	'10010'	: '⁄',
	};
	return str.split(' ').map(function(e){ return alphabet[e.toLowerCase()] || '';}).join(''); 
}


function sevendigit(text){
	var alphabet = {
		"1111110"   :   "0",
		"0110000"   :   "1",
		"1101101"   :   "2",
		"1111001"   :   "3",
		"0110011"   :   "4",
		"1011011"   :   "5",
		"1011111"   :   "6",
		"1110000"   :   "7",
		"1111111"   :   "8",
		"1111011"   :   "9",
		"1110111"   :   "a",
		"0011111"   :   "b",
		"1001110"   :   "c",
		"0111101"   :   "d",
		"1001111"   :   "e",
		"1000111"   :   "f"
	};
	var result="";
	for (var i=0; i< text.length; i+=7){
		result += alphabet[text.substr(i, 7)] || '';
	}
	return result;
}

function Hex2String(str){
	var ret="";
	for (var i = 0; i < str.length; i += 2){
		ret +=  String.fromCharCode(parseInt(str.substr(i, 2), 16).toString(10));
	}
	return ret;
}

function Dec2String(str){
	var ret="";
	for (var i = 0; i < str.length; i += 2){
		ret +=  String.fromCharCode(parseInt(str.substr(i, 2), 10).toString(10));
	}
	return ret;
}

function baudot54321(text){
	var result="";
	var alphabet = {
		"00000"   :   "[NULL]",
		"01000"   :   "[CR]",
		"00010"   :   "[LF]",
		"00100"   :   "[SP]",
		"10111"   :   "Q",
		"10011"   :   "W",
		"00001"   :   "E",
		"01010"   :   "R",
		"10000"   :   "T",
		"10101"   :   "Y",
		"00111"   :   "U",
		"00110"   :   "I",
		"11000"   :   "O",
		"10110"   :   "P",
		"00011"   :   "A",
		"00101"   :   "S",
		"01001"   :   "D",
		"01101"   :   "F",
		"11010"   :   "G",
		"10100"   :   "H",
		"01011"   :   "J",
		"01111"   :   "K",
		"10010"   :   "L",
		"10001"   :   "Z",
		"11101"   :   "X",
		"01110"   :   "C",
		"11110"   :   "V",
		"11001"   :   "B",
		"01100"   :   "N",
		"11100"   :   "M",
		"11011"   :   "[FS]",
		"11111"   :   "[LS]"
	};
	for (var i=0; i< text.length; i+=5){
		result += alphabet[text.substr(i, 5)] || '';
	}
	return result;
}

function baudot12345(text){
	var result="";
	var alphabet = {
		"00000"   :   "[NULL]",
		"00010"   :   "[CR]",
		"01000"   :   "[LF]",
		"00100"   :   "[SP]",
		"11101"   :   "Q",
		"11001"   :   "W",
		"10000"   :   "E",
		"01010"   :   "R",
		"00001"   :   "T",
		"10101"   :   "Y",
		"11100"   :   "U",
		"01100"   :   "I",
		"00011"   :   "O",
		"01101"   :   "P",
		"11000"   :   "A",
		"10100"   :   "S",
		"10010"   :   "D",
		"10110"   :   "F",
		"01011"   :   "G",
		"00101"   :   "H",
		"11010"   :   "J",
		"11110"   :   "K",
		"01001"   :   "L",
		"10001"   :   "Z",
		"10111"   :   "X",
		"01110"   :   "C",
		"01111"   :   "V",
		"10011"   :   "B",
		"00110"   :   "N",
		"00111"   :   "M",
		"11011"   :   "[FS]",
		"11111"   :   "[LS]"
	};
	for (var i=0; i< text.length; i+=5){
		result += alphabet[text.substr(i, 5)] || '';
	}
	return result;
}



function ibm80(text){
	var result="";
	var alphabet = {
		"100000000000"   :   "&",
		"010000000000"   :   "-",
		"001000000000"   :   "0",
		"000100000000"   :   "1",
		"000010000000"   :   "2",
		"000001000000"   :   "3",
		"000000100000"   :   "4",
		"000000010000"   :   "5",
		"000000001000"   :   "6",
		"000000000100"   :   "7",
		"000000000010"   :   "8",
		"000000000001"   :   "9",
		"100100000000"   :   "A",
		"100010000000"   :   "B",
		"100001000000"   :   "C",
		"100000100000"   :   "D",
		"100000010000"   :   "E",
		"100000001000"   :   "F",
		"100000000100"   :   "G",
		"100000000010"   :   "H",
		"100000000001"   :   "I",
		"010100000000"   :   "J",
		"010010000000"   :   "K",
		"010001000000"   :   "L",
		"010000100000"   :   "M",
		"010000010000"   :   "N",
		"010000001000"   :   "O",
		"010000000100"   :   "P",
		"010000000010"   :   "Q",
		"010000000001"   :   "R",
		"001100000000"   :   "/",
		"001010000000"   :   "S",
		"001001000000"   :   "T",
		"001000100000"   :   "U",
		"001000010000"   :   "V",
		"001000001000"   :   "W",
		"001000000100"   :   "X",
		"001000000010"   :   "Y",
		"001000000001"   :   "Z"
	};
	for (var i=0; i< text.length; i+=12){
		result += alphabet[text.substr(i, 12)] || '';
	}
	return result;

}

function code128(text){
	var result="";
	var alphabet = {
		"11011001100"   :   "[SP]",
		"11001101100"   :   " !",
		"11001100110"   :   '"',
		"10010011000"   :   "#",
		"10010001100"   :   "$",
		"10001001100"   :   " %",
		"10011001000"   :   "&",
		"10011000100"   :   "'",
		"10001100100"   :   "(",
		"11001001000"   :   ")",
		"11001000100"   :   "*",
		"11000100100"   :   "+",
		"10110011100"   :   ",",
		"10011011100"   :   "-",
		"10011001110"   :   ".",
		"10111001100"   :   "/",
		"10011101100"   :   "0",
		"10011100110"   :   "1",
		"11001110010"   :   "2",
		"11001011100"   :   "3",
		"11001001110"   :   "4",
		"11011100100"   :   "5",
		"11001110100"   :   "6",
		"11101101110"   :   "7",
		"11101001100"   :   "8",
		"11100101100"   :   "9",
		"11100100110"   :   ":",
		"11101100100"   :   ";",
		"11100110100"   :   "<",
		"11100110010"   :   "=",
		"11011011000"   :   ">",
		"11011000110"   :   " ?",
		"11000110110"   :   "@",
		"10100011000"   :   "A",
		"10001011000"   :   "B",
		"10001000110"   :   "C",
		"10110001000"   :   "D",
		"10001101000"   :   "E",
		"10001100010"   :   "F",
		"11010001000"   :   "G",
		"11000101000"   :   "H",
		"11000100010"   :   "I",
		"10110111000"   :   "J",
		"10110001110"   :   "K",
		"10001101110"   :   "L",
		"10111011000"   :   "M",
		"10111000110"   :   "N",
		"10001110110"   :   "O",
		"11101110110"   :   "P",
		"11010001110"   :   "Q",
		"11000101110"   :   "R",
		"11011101000"   :   "S",
		"11011100010"   :   "T",
		"11011101110"   :   "U",
		"11101011000"   :   "V",
		"11101000110"   :   "W",
		"11100010110"   :   "X",
		"11101101000"   :   "Y",
		"11101100010"   :   "Z",
		"11100011010"   :   "[",
		"11101111010"   :   '\\',
		"11001000010"   :   "]",
		"11110001010"   :   "^",
		"10100110000"   :   "_",
		"10100001100"   :   "`",
		"10010110000"   :   "a",
		"10010000110"   :   "b",
		"10000101100"   :   "c",
		"10000100110"   :   "d",
		"10110010000"   :   "e",
		"10110000100"   :   "f",
		"10011010000"   :   "g",
		"10011000010"   :   "h",
		"10000110100"   :   "i",
		"10000110010"   :   "j",
		"11000010010"   :   "k",
		"11001010000"   :   "l",
		"11110111010"   :   "m",
		"11000010100"   :   "n",
		"10001111010"   :   "o",
		"10100111100"   :   "p",
		"10010111100"   :   "q",
		"10010011110"   :   "r",
		"10111100100"   :   "s",
		"10011110100"   :   "t",
		"10011110010"   :   "u",
		"11110100100"   :   "v",
		"11110010100"   :   "w",
		"11110010010"   :   "x",
		"11011011110"   :   "y",
		"11011110110"   :   "z",
		"11110110110"   :   "{",
		"10101111000"   :   "|",
		"10100011110"   :   "}",
		"10001011110"   :   "~",
		"10111101000"   :   "[US]",
		"10111100010"   :   "[FNC3]",
		"11110101000"   :   "[FNC2]",
		"11110100010"   :   "[ShiftB]",
		"10111011110"   :   "[CodeC]",
		"10111101110"   :   "[CodeB]",
		"11101011110"   :   "[FNC4]",
		"11110101110"   :   "[FNC1]",
		"11010000100"   :   "[Start Code A]",
		"11010010000"   :   "[Start Code B]",
		"11010011100"   :   "[Start Code C]",
		"1100011101011"   :   "[Stop (7 bars/spaces)]",
		"11010111000"   :   "[reading right to left]"

	};
	for (var i=0; i< text.length; i+=11){
		result += alphabet[text.substr(i, 11)] || '';
		if (text.substr(i, 11) == "11000111010"){
			result += alphabet[text.substr(i, 13)] || '';
			i+=2;
		}
	}
	return result;

}


function code93(text){
	var result="";
	var alphabet = {
		"100010100"   :   "0",
		"101001000"   :   "1",
		"101000100"   :   "2",
		"101000010"   :   "3",
		"100101000"   :   "4",
		"100100100"   :   "5",
		"100100010"   :   "6",
		"101010000"   :   "7",
		"100010010"   :   "8",
		"100001010"   :   "9",
		"110101000"   :   "A",
		"110100100"   :   "B",
		"110100010"   :   "C",
		"110010100"   :   "D",
		"110010010"   :   "E",
		"110001010"   :   "F",
		"101101000"   :   "G",
		"101100100"   :   "H",
		"101100010"   :   "I",
		"100110100"   :   "J",
		"100011010"   :   "K",
		"101011000"   :   "L",
		"101001100"   :   "M",
		"101000110"   :   "N",
		"100101100"   :   "O",
		"100010110"   :   "P",
		"110110100"   :   "Q",
		"110110010"   :   "R",
		"110101100"   :   "S",
		"110100110"   :   "T",
		"110010110"   :   "U",
		"110011010"   :   "V",
		"101101100"   :   "W",
		"101100110"   :   "X",
		"100110110"   :   "Y",
		"100111010"   :   "Z",
		"100101110"   :   "-",
		"111010100"   :   ".",
		"111010010"   :   "[SP]",
		"111001010"   :   "$",
		"101101110"   :   "/",
		"101110110"   :   "+",
		"110101110"   :   " %",
		"100100110"   :   "($)",
		"111011010"   :   "(%)",
		"111010110"   :   "(/)",
		"100110010"   :   "(+)",
		"101011110"   :   "Start/Stop",
		"101111010"   :   "(Reverse stop)",
		"111101010"   :   "Unused",
		"101011100"   :   "Unused",
		"101001110"   :   "Unused",
		"101110100"   :   "Unused",
		"101110010"   :   "Unused",
		"110111010"   :   "Unused",
		"110110110"   :   "Unused",
	};
	for (var i=0; i< text.length; i+=9){
		result += alphabet[text.substr(i, 9)] || '';
	}
	return result;

}


function baudot(str){
	return baudot54321(str)+" / " +baudot12345(str);
}

function PrintAlltext(str){
	cleartextarea();
	$( ".formtext"   ).val(Morse2Str(str));
	$( ".formmorse"  ).val(str);
	$( ".form7seg"   ).val(sevendigit(trimCRLF(trimspace(str))) );
	$( ".form7sega"  ).val(Hex2String(sevendigit(trimCRLF(trimspace(str)))) );
	$( ".form7seg0"  ).val(Dec2String(sevendigit(trimCRLF(trimspace(str)))) );
//	$( ".form14seg"   ).val(Dec2String(sevendigit(trimCRLF(trimspace(str)))) );
//	$( ".form14sega"  ).val(Dec2String(sevendigit(trimCRLF(trimspace(str)))) );
//	$( ".form16seg"   ).val(Dec2String(sevendigit(trimCRLF(trimspace(str)))) );
//	$( ".form16sega"  ).val(Dec2String(sevendigit(trimCRLF(trimspace(str)))) );
	$( ".baudot"     ).val( baudot(trimCRLF(trimspace(str))) );
	$( ".ibm80"      ).val(  ibm80(trimCRLF(trimspace(str))) );
//	$( ".code39"     ).val( code39(trimCRLF(trimspace(str))) );
	$( ".code93"     ).val( code93(trimCRLF(trimspace(str))) );
	$( ".code128"    ).val(code128(trimCRLF(trimspace(str))) );
//	$( ".form14seg"   ).val(Dec2String(sevendigit(trimCRLF(trimspace(str)))) );
//	$( ".form14sega"  ).val(Dec2String(sevendigit(trimCRLF(trimspace(str)))) );
//	$( ".form16seg"   ).val(Dec2String(sevendigit(trimCRLF(trimspace(str)))) );
//	$( ".form16sega"  ).val(Dec2String(sevendigit(trimCRLF(trimspace(str)))) );


}